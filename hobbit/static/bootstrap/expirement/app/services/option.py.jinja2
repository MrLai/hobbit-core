import os
import importlib
import inspect
from hobbit_core.db import EnumExt

from flask import current_app


class OptionService:

    @classmethod
    def get_options(cls):
        return {
            name: obj.to_opts(verbose=True)
            for name, obj in importlib.import_module(
                'app.models.consts').__dict__.items()
            if inspect.isclass(obj) and issubclass(obj, EnumExt) and
            obj != EnumExt
        } if os.path.exists(
            os.path.join(current_app.config['ROOT_PATH'], 'app', 'models',
                         'consts.py')) else {}

